<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parramatta Arabic School Teacher Enrollment Form</title>
    <style>
        .pas-form * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
        }

        .pas-form {
            background: #fcfcfc;
            color: #333;
            padding: 0.5em;
            max-width: 100%;
            overflow: auto;
        }

        .pas-form h1 {
            color: #981c1c;
            margin-bottom: 1em;
            font-size: 1.8em;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.8em;
        }

        .pas-form legend {
            font-size: 1.2em;
            padding: 0 0.8em;
            font-weight: 700;
            color: #981c1c;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .pas-form input,
        .pas-form select,
        .pas-form textarea {
            font-size: 0.95em;
            padding: 0.8em;
            border: 1px solid #ccc;
            border-radius: 10px;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .pas-form input:focus,
        .pas-form select:focus,
        .pas-form textarea:focus {
            outline: none;
            border-color: #981c1c;
            box-shadow: 0 0 0 3px rgba(152, 28, 28,0.1);
        }

        .pas-form textarea {
            resize: vertical;
            min-height: 100px;
        }

        .pas-form .form-row {
            display: flex;
            flex-direction: column;
            gap: 0.5em;
            margin-bottom: 1.2em;
        }

        .pas-form .form-row > .checkbox-group,
        .pas-form .form-row > .radio-group,
        .pas-form .form-row > .instruction-text,
        .pas-form .form-row > textarea {
            grid-column: 1 / -1;
            width: 100%;
        }

        .pas-form .form-row > :not(label):not(:first-child):last-child:not(input):not(select) {
            grid-column: 1 / -1;
        }

        .pas-form fieldset {
            margin: 1.5em 0;
            padding: 1.5em;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f8f9fa;
        }

        .pas-form .inline-group {
            display: flex;
            gap: 1em;
            margin: 1em 0;
            flex-wrap: wrap;
        }

        .pas-form .inline-group .form-row {
            flex: 1 1 100%;
            min-width: 150px;
        }

        @media (max-width: 600px) {
            .pas-form .inline-group {
                flex-direction: column;
                gap: 0.5em;
            }

            .pas-form .inline-group .form-row {
                flex: 1 1 100%;
            }
        }

        .pas-form button {
            background: #981c1c;
            color: #fff;
            padding: 1em 2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            margin: 1.5em 0;
            transition: all 0.3s ease;
        }

        .pas-form button:hover {
            background: #003366;
            transform: translateY(-1px);
        }

        .pas-form input[type="radio"],
        .pas-form input[type="checkbox"] {
            width: auto;
            height: 1.1em;
            margin-right: 0.5em;
        }

        .pas-form .checkbox-group label,
        .pas-form .radio-group label {
            display: flex;
            align-items: center;
            margin: 0.5em 0;
        }

        .pas-form {
            min-height: 100vh;
            box-sizing: border-box;
        }

        .pas-form .instruction-text {
            font-size: 0.9em;
            margin: 1em 0;
            padding: 1em;
            border: 1px solid #eee;
            border-radius: 4px;
            background: #f8f9fa;
            color: #444;
        }

        .pas-form .required {
            font-weight: 600;
        }

        .pas-form .required::after {
            content: "*";
            color: #e00;
            margin-left: 4px;
            display: inline-block;
        }

        .pas-form select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.8em center;
            background-size: 1em;
        }

        .pas-form h3 {
            margin: 1.5em 0 1em;
            color: #444;
            font-size: 1.1em;
            padding-top: 0.5em;
            border-top: 1px solid #eee;
        }

        .error-highlight {
            border-color: #ff0000 !important;
            box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1) !important;
        }

        .ques-description {
            color: #666;
        }

        .error-message {
            color: #ff0000;
            font-size: 0.9em;
            margin-top: 0.5em;
            padding: 0.5em;
            background-color: #fff0f0;
            border: 1px solid #ffcccc;
            border-radius: 4px;
            display: inline-block;
            width: 100%;
            box-sizing: border-box;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            margin-top: 1em;
            color: #981c1c;
            font-weight: bold;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .pas-form datalist {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 0 0 4px 4px;
            width: 100%;
        }

        .pas-form label {
            font-weight: bold;
        }
        
        .enrollment-guidelines {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 1.5em;
            margin-bottom: 2em;
            line-height: 1.6;
        }
        
        .enrollment-guidelines h2 {
            color: #981c1c;
            margin-bottom: 0.5em;
            font-size: 1.5em;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5em;
        }
        
        .enrollment-guidelines p {
            margin-bottom: 1em;
        }

        .faq-accordion {
            margin-bottom: 2em;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
            background-color: transparent;
        }

        .faq-accordion h2 {
            color: #333;
            margin-bottom: 0;
            font-size: 1.2em;
            padding: 0.5em 1.2em;
            border-bottom: 1px solid #ddd;
            background-color: transparent;
        }

        .accordion-item {
            border-bottom: 1px solid #ddd;
        }

        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-button {
            background-color: #f8f9fa !important;
            color: #333 !important;
            cursor: pointer !important;
            padding: 0.5em 1.3em !important;
            width: 100% !important;
            text-align: left !important;
            border: 0.8 !important;
            border-color: #f8f9fa !important;
            border-bottom: 0.8px solid #f8f9fa !important;
            outline: none !important;
            transition: 0.2s !important;
            font-weight: bold !important;
            font-size: 0.9em !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            margin: 0 !important;
        }

        .accordion-button:hover {
            background-color: #fafafa;
        }

        .accordion-button.active {
            background-color: #fff;
            border-bottom: none;
        }

        .accordion-button:after {
            content: '+';
            font-size: 1em;
            color: #555;
            margin-left: 5px;
        }

        .accordion-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: transparent;
            border-top: none;
        }

        .accordion-content-inner {
            padding: 0.8em 1.2em;
            color: #555;
            font-size: 0.9em;
            border-top: 1px solid #eee;
        }

        .accordion-content p {
            margin-bottom: 0.8em;
        }

        .accordion-content p:last-child {
            margin-bottom: 0;
        }

        .document-upload-section {
        display: flex;
        gap: 1.5rem;
        flex-wrap: wrap;
        }

        .form-col {
            flex: 1;
            min-width: 250px;
        }

        .file-selected {
            border-color: #28a745 !important;
            background: #f0fff4 !important;
        }

        .file-checkmark {
            color: #28a745;
            font-weight: bold;
            margin-left: 5px;
        }

        @media (max-width: 768px) {
            .document-upload-section {
                flex-direction: column;
            }
        }
    </style>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDLwIOHwQuG-RA0xU2bBna-P1A_W9JaHU8&libraries=places&callback=initAutocomplete" async defer></script>
</head>
<body>
    <div class="pas-form">
        <form id="enrollmentForm">
            <fieldset>
                <legend>Teacher Details</legend>
                <div class="instruction-text">
                    <p>Please complete the form carefully and provide accurate information.</p>
                </div>

                <div class="form-row">
                    <label class="required">Teacher First Name</label>
                    <input type="text" name="teacherFirstName" required>
                </div>

                <div class="form-row">
                    <label class="required">Teacher Last Name</label>
                    <input type="text" name="teacherLastName" required>
                </div>

                <p class="instruction-text">I confirm that my name is entered exactly as on my official ID, which I will present during recruitment.</p>

                <div class="form-row">
                    <label class="required">Teacher Birth Date</label>
                    <p>Date of birth is required for us to meet our obligations under the Child Protection (Working With Children) Act 2012.</p>
                    <input type="date" name="teacherBirthDate" required>
                </div>

                <div class="form-row">
                    <label class="required">Gender</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="gender" value="Male" required> Male</label>
                        <label><input type="radio" name="gender" value="Female" required> Female</label>
                    </div>
                </div>

                <div class="form-row">
                    <label class="required">Mother Tongue</label>
                    <p>What language did you first speak as a child?</p>
                    <div class="checkbox-group">
                        <label><input type="radio" name="motherTongue" value="Arabic" required> Arabic</label>
                        <label><input type="radio" name="motherTongue" value="English" required> English</label>
                        <label><input type="radio" name="motherTongue" value="Other" required> Other</label>
                    </div>
                    <div id="otherMotherTongueContainer" style="display: none; margin-top: 10px;">
                        <label class="required">Please specify</label>
                        <input type="text" name="otherMotherTongue">
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Contact Details</legend>
                <div class="form-row">
                    <label class="required">Email Address</label>
                    <input type="email" name="contactEmail" required>
                </div>
                <div class="form-row">
                    <label class="required">Phone Number</label>
                    <input type="tel" name="contactPhone" required>
                </div>
                
                <h3>Address</h3>
                <div class="form-row">
                    <label class="required">Street Address</label>
                    <div class="ques-description">Include apartment/unit number (if applicable), street number and street name</div>
                    <div class="address-input-container">
                        <input type="text" name="streetName" required placeholder="Start typing to search for address" autocomplete="off">
                        <div class="address-suggestions" id="addressSuggestions"></div>
                    </div>
                </div>

                <div class="inline-group">
                    <div class="form-row" style="flex:1">
                        <label class="required">Suburb</label>
                        <input type="text" name="suburb" required>
                    </div>
                    <div class="form-row" style="flex:1">
                        <label class="required">State</label>
                        <select name="state" required>
                            <option>NSW</option>
                            <option>VIC</option>
                            <option>QLD</option>
                            <option>SA</option>
                            <option>WA</option>
                            <option>TAS</option>
                            <option>NT</option>
                            <option>ACT</option>
                        </select>
                    </div>
                    <div class="form-row" style="flex:1">
                        <label class="required">Post Code</label>
                        <input type="number" name="postCode" required>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Education</legend>
                <div class="form-row">
                    <label class="required">Educational Level</label>
                    <select name="educationalLevel" required>
                        <option value="">Select Educational Level</option>
                        <option>Bachelor's Degree</option>
                        <option>Diploma</option>
                        <option>Doctorate Degree</option>
                        <option>Graduate Certificate</option>
                        <option>High School Certificate</option>
                        <option>Master's Degree</option>
                        <option>Non-Degree Program</option>
                        <option>Technical Qualification</option>
                    </select>
                </div>

                <div class="form-row">
                    <label class="required">Name of Qualification</label>
                    <p>Name of Qualification in relation to the role you are applying for.</p>
                    <input type="text" name="qualificationName" required>
                </div>

                <div class="form-row">
                    <label class="required">Educational Institution Name</label>
                    <input type="text" name="institutionName" required>
                </div>

                <div class="form-row">
                    <label class="required">Date of Completion</label>
                    <input type="date" name="completionDate" required>
                </div>

                <div class="form-row">
                    <label>Other Education Description</label>
                    <textarea name="otherEducationDescription"></textarea>
                </div>
            </fieldset>

            <fieldset>
                <legend>Application Details</legend>
                <div class="form-row">
                    <label class="required">What are you interested to apply for?</label>
                    <div class="checkbox-group">
                        <label><input type="radio" name="applicationType" value="Paid Part Time / Casual Work" required> Paid Part Time / Casual Work</label>
                        <label><input type="radio" name="applicationType" value="Volunteer only" required> Volunteer only</label>
                    </div>
                </div>

                <div class="form-row">
                    <label class="required">What are you interested to teach?</label>
                    <select name="teachingInterest" required>
                        <option value="">Select Teaching Interest</option>
                        <option>Arabic for beginners</option>
                        <option>Arabic for intermediate students</option>
                        <option>Arabic for advanced students</option>
                        <option>Quran recitation</option>
                    </select>
                </div>


                    <div class="form-row">
                        <label class="required">Do you have an active NSW Government issued WWCC?</label>
                        <div class="checkbox-group">
                            <label><input type="radio" name="hasWWCC" value="Yes" required> Yes</label>
                            <label><input type="radio" name="hasWWCC" value="No" required> No</label>
                        </div>
                    </div>
                    <div id="wwccDetails" style="display: none;">
                        <div class="form-row">
                            <label class="required">WWCC Number</label>
                            <input type="text" name="wwccNumber">
                        </div>
                        <div class="form-row">
                            <label class="required">WWCC Expiration Date</label>
                            <input type="date" name="wwccExpiration">
                        </div>
                        <div class="form-row">
                            <label class="required">WWCC Type</label>
                            <select name="wwccType" required>
                                <option value="">Select Type</option>
                                <option>Volunteer</option>
                                <option>Paid</option>
                            </select>
                        </div>
                    </div>
            </fieldset>

            <fieldset>
                <legend>Work History</legend>
                <div class="instruction-text">
                    <p>Please list your relevant work experience, starting with the most recent position.</p>
                </div>

                <div class="work-history-section">
                    <div class="work-entry">
                        <div class="inline-group">
                            <div class="form-row" style="flex:2">
                                <label class="">Employer</label>
                                <input type="text" name="employer[]" >
                            </div>
                            <div class="form-row" style="flex:2">
                                <label class="">Position Title</label>
                                <input type="text" name="position[]">
                            </div>
                        </div>

                        <div class="inline-group">
                            <div class="form-row" style="flex:1">
                                <label class="">Start Date</label>
                                <input type="date" name="startDate[]" >
                            </div>
                            <div class="form-row" style="flex:1">
                                <label>End Date</label>
                                <input type="date" name="endDate[]">
                            </div>
                        </div>

                        <div class="form-row">
                            <label>Responsibilities / Achievements</label>
                            <textarea name="responsibilities[]" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <hr style="color: #666;"></hr>
                <div class="work-history-section">
                    <div class="work-entry">
                        <div class="inline-group">
                            <div class="form-row" style="flex:2">
                                <label class="">Employer 2</label>
                                <input type="text" name="employer2[]" >
                            </div>
                            <div class="form-row" style="flex:2">
                                <label class="">Position Title 2</label>
                                <input type="text" name="position2[]">
                            </div>
                        </div>

                        <div class="inline-group">
                            <div class="form-row" style="flex:1">
                                <label class="">Start Date 2</label>
                                <input type="date" name="startDate2[]" >
                            </div>
                            <div class="form-row" style="flex:1">
                                <label>End Date 2</label>
                                <input type="date" name="endDate2[]">
                            </div>
                        </div>

                        <div class="form-row">
                            <label>Responsibilities / Achievements 2</label>
                            <textarea name="responsibilities2[]" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <div class="work-history-section">
                    <strong style="color: #333; font-size: large;">References</strong>
                    <div class="instruction-text">
                        <p>By providing reference contact information, you are permitting Parramatta Arabic School to contact your referees. List your references below in the order of contact preference, starting with the most relevant one.</p>
                        <p>References are individuals that are familiar with your work capabilities and your educational training.</p>
                    </div>
                    <div class="work-entry">
                        <div class="inline-group">
                            <div class="form-row" style="flex:2">
                                <label class="">Name</label>
                                <input type="text" name="referenceName[]" >
                            </div>
                            <div class="form-row" style="flex:2">
                                <label class="">Phone Number</label>
                                <input type="tel" name="referenceNumber[]">
                            </div>
                        </div>

                        <div class="inline-group">
                            <div class="form-row" style="flex:1">
                                <label class="">Name</label>
                                <input type="text" name="referenceName2[]" >
                            </div>
                            <div class="form-row" style="flex:1">
                                <label>Phone Number 2</label>
                                <input type="tel" name="referenceNumber2[]">
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Supporting Documents & Cover Letter</legend>
                <div class="form-row">
                    <label>Cover Letter</label>
                    <p>Keep your cover letter concise. Highlight why you're applying, the role details, a brief introduction, and a summary of your relevant skills and experience.</p>
                    <textarea name="coverLetter[]" rows="5"></textarea>
                </div>

                <div class="instruction-text">
                    <p>To complete your application, you need to upload a copy of your up to date resume, a copy of your work with children check and any qualification you have in relation to your application. (PDF or images, max 2MB each):</p>
                    <p>The income tax declaration form is available on the Australian Taxation Office website. You will be required to complete one should your application be approved.</p>
                </div>

                <div class="document-upload-section">
                    <div class="form-col">
                        <div class="form-row">
                            <label>Document 1</label>
                            <div class="file-input">
                                <input type="file" name="resume" accept=".pdf,.doc,.docx,image/*">
                                <div class="file-input-label">
                                    <span class="upload-text">Click to upload file</span><br>
                                    <span class="file-info">(PDF, DOC/DOCX, or image files)</span>
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="form-col">
                        <div class="form-row">
                            <label>Document 2</label>
                            <div class="file-input">
                                <input type="file" name="certificates" accept=".pdf,image/*">
                                <div class="file-input-label">
                                    <span class="upload-text">Click to upload file</span><br>
                                    <span class="file-info">(PDF or image files)</span>
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="form-col">
                        <div class="form-row">
                            <label>Document 3</label>
                            <div class="file-input">
                                <input type="file" name="idProof" accept=".pdf,image/*">
                                <div class="file-input-label">
                                    <span class="upload-text">Click to upload file</span><br>
                                    <span class="file-info">(PDF or image files)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Consent & Declaration</legend>
                <ol>
                    <li>Agreement to terms and conditions of use including our privacy policy in relation to your personal information:
                        The application you are submitting will be stored on Parramatta Arabic School system including the website, our cloud based storage facility and a back up drive.
                        You must be aware that your application does not provide you with a binding offer and may end up being rejected depending on the recruitment process.
                        You must also be aware that Parramatta Arabic School disclaims any possible liability for any error or omission on the information on our website or for any damages, computer virus, losses or expenses that may occur while accessing our website.
                        It is important that you refer to our privacy policy to understand how your personal information is stored or disclosed.

                    </li>
                    <div>
                        <p style="color: white;">
                            -
                        </p>
                    </div>
                    <li>Agreement of being aware of information that will be collected during the recruitment process:
                        You need to provide supporting documents for your application to progress. Further documents may also be requested should your application be successful. The information we collect is used to manage your employment and is stored on our system.
                        Some of your information may be disclosed to the Australian Taxation Office, NSW Fair Trading, the Department of Education or other government agency for compliance purposes.</li>
                </ol>
                <div class="form-row">
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="informationAccuracy" required> I confirm the accuracy of provided information</label>
                        <label><input type="checkbox" name="dataSharing" required> I consent to information sharing</label>
                    </div>
                </div>
            </fieldset>

            <div style="text-align: center">
                <button type="submit">Submit Application</button>
            </div>
        </form>

        <div id="thankYouMessage" style="display: none; text-align: center; margin-top: 2em;">
            <h1>Thank You!</h1>
            <p>Your application has been submitted successfully.</p>
        </div>

        <div id="statusMessage" style="text-align: center; margin-top: 1em;"></div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <img src="https://arabicschool.blob.core.windows.net/arabicschool/statics/loading.svg" 
             alt="Loading..." 
             class="loading-spinner">
        <div class="loading-text">Submitting your application... Please wait</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const wwccDetails = document.getElementById('wwccDetails');
            const wwccRadios = document.querySelectorAll('input[name="hasWWCC"]');

            wwccRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes') {
                        wwccDetails.style.display = 'block';
                        document.querySelectorAll('#wwccDetails input, #wwccDetails select').forEach(input => {
                            input.required = true;
                        });
                    } else {
                        wwccDetails.style.display = 'none';
                        document.querySelectorAll('#wwccDetails input, #wwccDetails select').forEach(input => {
                            input.required = false;
                            if (input.tagName === 'INPUT') {
                                input.value = '';
                            } else if (input.tagName === 'SELECT') {
                                input.selectedIndex = 0;
                            }
                        });
                    }
                });
                if (radio.checked) radio.dispatchEvent(new Event('change'));
            });

            // File validation functions
            function showFileError(input, message) {
                const container = input.closest('.form-row');
                let error = container.querySelector('.file-error');
                if (!error) {
                    error = document.createElement('div');
                    error.className = 'error-message';
                    container.appendChild(error);
                }
                error.textContent = message;
                input.classList.add('error-highlight');
            }

            function clearFileError(input) {
                const container = input.closest('.form-row');
                const error = container.querySelector('.error-message');
                if (error) error.remove();
                input.classList.remove('error-highlight');
            }

            // File input handlers
            document.querySelectorAll('input[type="file"]').forEach(input => {
                input.addEventListener('change', function(e) {
                    const maxSize = 2 * 1024 * 1024; // 2MB
                    const file = this.files[0];
                    const label = this.parentElement.querySelector('.file-input-label');
                    const uploadText = label.querySelector('.upload-text');
                    
                    if (file) {
                        // Validate file type
                        const validTypes = ['application/pdf', 'image/jpeg', 'image/png', 
                                            'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                        
                        if (!validTypes.includes(file.type)) {
                            showFileError(this, 'Invalid file type. Please upload PDF, DOC/DOCX, or image files.');
                            this.value = '';
                            label.classList.remove('file-selected');
                            return;
                        }

                        // Validate file size
                        if (file.size > maxSize) {
                            showFileError(this, 'File size exceeds 2MB limit.');
                            this.value = '';
                            label.classList.remove('file-selected');
                            return;
                        }

                        // Update display
                        uploadText.innerHTML = `Selected: ${file.name} <span class="file-checkmark">✓</span>`;
                        label.classList.add('file-selected');
                        label.innerHTML = `
                            ${uploadText.outerHTML}
                            <span class="file-info">${(file.size/1024/1024).toFixed(1)}MB • ${file.type.split('/')[1].toUpperCase()}</span>
                        `;
                        clearFileError(this);
                    } else {
                        label.classList.remove('file-selected');
                        uploadText.textContent = 'Click to upload file';
                    }
                });
            });

            document.getElementById('enrollmentForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const submitButton = event.target.querySelector('button[type="submit"]');
                const loadingOverlay = document.getElementById('loadingOverlay');
                
                try {
                    if (!validateForm()) return;

                    loadingOverlay.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                    submitButton.disabled = true;

                    const formData = new FormData(event.target);

                    const streetNameInput = document.querySelector('[name="streetName"]');
                    const streetNameValue = streetNameInput.value;

                    const streetRegex = /^(?:(?:unit|apt|apartment|suite|flat|level|#)\s*)?([0-9]+)\/([0-9]+)|([0-9]+)\s+([a-zA-Z]+)/i;
                    const match = streetNameValue.match(streetRegex);

                    let streetName = streetNameValue;

                    if (match) {
                        if (match[1] && match[2]) {
                            streetName = `${match[1]}/${match[2]}`;
                        } else if (match[3] && match[4]) {
                            streetName = `${match[3]} ${match[4]}`;
                        }
                    }

                    formData.set('streetName', streetName);

                    const response = await fetch('https://arabicschool.azurewebsites.net/api/teacher?code=BoMZp_wXeDIG-DW-RW76ITrIMGhw37THxGLzFx10doskAzFuEb0n3w==', {
                        method: 'POST',
                        body: formData
                    });

                    if (!response.ok) throw new Error('Server error');
                    
                    document.getElementById('enrollmentForm').style.display = 'none';
                    document.getElementById('thankYouMessage').style.display = 'block';
                    document.getElementById("statusMessage").textContent = "";
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('statusMessage').textContent = 
                        'Error submitting form. Please try again.';
                } finally {
                    loadingOverlay.style.display = 'none';
                    document.body.style.overflow = '';
                    submitButton.disabled = false;
                }
            });

            function validateForm() {
                let isValid = true;

                const motherTongueOther = document.querySelector('input[name="motherTongue"][value="Other"]');
                if (motherTongueOther?.checked && !document.querySelector('input[name="otherMotherTongue"]').value) {
                    showFileError(document.querySelector('input[name="otherMotherTongue"]'), 'Please specify your mother tongue');
                    isValid = false;
                }

                document.querySelectorAll('input[type="file"]').forEach(input => {
                    if (input.files.length > 0) {
                        const file = input.files[0];
                        const validTypes = ['application/pdf', 'image/jpeg', 'image/png', 
                                        'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                        
                        if (!validTypes.includes(file.type)) {
                            showFileError(input, 'Invalid file type. Please upload PDF, DOC/DOCX, or image files.');
                            isValid = false;
                        }
                        
                        if (file.size > 2 * 1024 * 1024) {
                            showFileError(input, 'File size exceeds 2MB limit.');
                            isValid = false;
                        }
                    }
                });

                return isValid;
            }
        });

        function initAutocomplete() {
            const addressInput = document.querySelector('[name="streetName"]');
            const suburbInput = document.querySelector('[name="suburb"]');
            const stateInput = document.querySelector('[name="state"]');
            const postCodeInput = document.querySelector('[name="postCode"]');
            
            const stateMapping = {
                'New South Wales': 'NSW',
                'Victoria': 'VIC',
                'Queensland': 'QLD',
                'South Australia': 'SA',
                'Western Australia': 'WA',
                'Tasmania': 'TAS',
                'Northern Territory': 'NT',
                'Australian Capital Territory': 'ACT'
            };
            
            const autocomplete = new google.maps.places.Autocomplete(addressInput, {
                componentRestrictions: { country: 'au' },
                types: ['address']
            });
            
            addressInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && document.querySelector('.pac-container:visible')) {
                    e.preventDefault();
                    return false;
                }
            });
            
            autocomplete.addListener('place_changed', function() {
                const place = autocomplete.getPlace();
                if (!place.geometry) return;
                
                const originalValue = addressInput.value;
                
                const ausStyleRegex = /^(?:(?:unit|apt|apartment|suite|flat|level|#)\s*)?([0-9]+)\/([0-9]+)/i;
                const apartmentRegex = /(?:unit|apt|apartment|suite|flat|level|#)\s*\.?\s*[a-z0-9-]+/i;
                
                const ausMatch = ausStyleRegex.exec(originalValue);
                const apartmentMatch = ausMatch ? null : apartmentRegex.exec(originalValue);
                
                let apartmentInfo = '';
                
                if (ausMatch && ausMatch[0]) {
                    apartmentInfo = ausMatch[0].trim();
                } else if (apartmentMatch && apartmentMatch[0]) {
                    apartmentInfo = apartmentMatch[0].trim();
                }
                
                suburbInput.value = '';
                stateInput.value = 'NSW';
                postCodeInput.value = '';
                
                let streetNumber = '';
                let streetName = '';
                let suburb = '';
                let state = '';
                let postCode = '';
                
                for (const component of place.address_components) {
                    const type = component.types[0];
                    
                    switch(type) {
                        case 'street_number':
                            streetNumber = component.long_name;
                            break;
                        case 'route':
                            streetName = component.long_name;
                            break;
                        case 'locality':
                        case 'sublocality':
                        case 'sublocality_level_1':
                            suburb = component.long_name;
                            break;
                        case 'administrative_area_level_1':
                            state = component.long_name;
                            break;
                        case 'postal_code':
                            postCode = component.long_name;
                            break;
                    }
                }
                
                if (apartmentInfo) {
                    if (ausMatch) {
                        const unitPart = ausMatch[1]; 
                        const streetPart = ausMatch[2]; 
                        
                        if (streetPart === streetNumber) {
                            addressInput.value = originalValue;
                        } else {
                            addressInput.value = `${unitPart}/${streetNumber} ${streetName}`;
                        }
                    } else {
                        const separator = apartmentInfo.endsWith(',') ? ' ' : ', ';
                        addressInput.value = apartmentInfo + separator + streetNumber + ' ' + streetName;
                    }
                } else {
                    addressInput.value = streetNumber + ' ' + streetName;
                }
                
                suburbInput.value = suburb;
                
                if (state && stateMapping[state]) {
                    stateInput.value = stateMapping[state];
                } else if (state) {
                    stateInput.value = state;
                }
                
                postCodeInput.value = postCode;
            });
        }

        document.querySelectorAll('input[type="file"]').forEach(input => {
        input.addEventListener('change', function(e) {
            const maxSize = 2 * 1024 * 1024;
            const file = this.files[0];
            const label = this.parentElement.querySelector('.file-input-label');
            const uploadText = label.querySelector('.upload-text');
            
            if (file) {

                const validTypes = ['application/pdf', 'image/jpeg', 'image/png', 
                                  'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                
                if (!validTypes.includes(file.type)) {
                    showFileError(this, 'Invalid file type. Please upload PDF, DOC/DOCX, or image files.');
                    this.value = '';
                    label.classList.remove('file-selected');
                    return;
                }

                if (file.size > maxSize) {
                    showFileError(this, 'File size exceeds 2MB limit.');
                    this.value = '';
                    label.classList.remove('file-selected');
                    return;
                }

                uploadText.innerHTML = `Selected: ${file.name} <span class="file-checkmark">✓</span>`;
                label.classList.add('file-selected');
                label.innerHTML = `
                    ${uploadText.outerHTML}
                    <span class="file-info">${(file.size/1024/1024).toFixed(1)}MB • ${file.type.split('/')[1].toUpperCase()}</span>
                `;
                clearFileError(this);
            } else {
                label.classList.remove('file-selected');
                uploadText.textContent = 'Click to upload file';
            }
        });
    });
        
    document.addEventListener('DOMContentLoaded', function() {
    const motherTongueRadios = document.querySelectorAll('input[name="motherTongue"]');
    const otherContainer = document.getElementById('otherMotherTongueContainer');
    const otherInput = document.querySelector('input[name="otherMotherTongue"]');

    motherTongueRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherContainer.style.display = 'block';
                otherInput.required = true;
            } else {
                otherContainer.style.display = 'none';
                otherInput.required = false;
                otherInput.value = '';
            }
        });
    });

    if (document.querySelector('input[name="motherTongue"]:checked')?.value === 'Other') {
        otherContainer.style.display = 'block';
        otherInput.required = true;
    }
});
    </script>
</body>
</html>
